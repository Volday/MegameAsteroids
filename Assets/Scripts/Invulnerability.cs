using System.Collections;
using UnityEngine;

public class Invulnerability : MonoBehaviour
{
    public void Activate(float _time, GameObject _scin) {
        Invulnerability[] oldInvulnerabilities = gameObject.GetComponents<Invulnerability>();
        for (int i = 0; i < oldInvulnerabilities.Length; i++)
        {
            if (oldInvulnerabilities[i] != this) {
                Destroy(oldInvulnerabilities[i]);
            }
        }

        StartCoroutine(TurnOffInTime(_time, _scin));
    }

    IEnumerator TurnOffInTime(float _time, GameObject _scin)
    {
        for (int i = 0; i < (int)(_time * 2); i++)//Эффект мерцания и отключение неуязвимости
        {
            if (_scin.activeSelf)
            {
                _scin.SetActive(false);
            }
            else {
                _scin.SetActive(true);
            }
            yield return new WaitForSeconds(.5f);
        }
        _scin.SetActive(true);
        Destroy(this);
    }
}
